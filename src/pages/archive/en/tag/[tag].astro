---
import ArchivePanel from "@components/ArchivePanel.astro";
import MainGridLayout from "@layouts/MainGridLayout.astro";
import { getSortedPosts } from "@utils/content-utils";
import { t } from "../../../../i18n";

const locale = "en";

export async function getStaticPaths() {
	const posts = await getSortedPosts("en");
	const allTags = posts.reduce<Set<string>>((acc, post) => {
		post.data.tags.forEach((tag) => acc.add(tag));
		return acc;
	}, new Set());

	return Array.from(allTags).map((tag) => ({
		params: { tag },
	}));
}

const tag = Astro.params.tag as string;
---

<MainGridLayout title={`${tag} - ${t("common.tags", locale)}`} description={`${t("archive.title", locale)} - ${tag}`} hideSidebar={true} lang={locale}>
	<ArchivePanel tags={[tag]} locale={locale}></ArchivePanel>
</MainGridLayout>
